<div class="picker-container">
    
    <div class="picker-box" [class.disabled]="isDisabled()" (click)="openDialog()">
        
        @if (selectedItem(); as item) {
            <div class="current-value">
                <div class="avatar">
                    <io-profile-avatar [profile]="item"></io-profile-avatar>
                </div>
                
                <div class="text-info">
                    <span class="name">{{ item.firstName }} {{ item.lastName }}</span>
                    
                    @if (!hideDetail()) {
                        <div class="metadata-row">
                            
                            <span class="meta-item"><mat-icon>email</mat-icon>{{ item.email }}</span>
                            
                            @if (item.phone) {
                                <span class="meta-item">
                                    <mat-icon>phone</mat-icon> {{ item.phone }}
                                </span>
                            }
                            
                            @if (item.department) {
                                <span class="meta-item">
                                    <span class="sub-label">Dept</span> {{ item.department }}
                                </span>
                            }
                            
                        </div>
                    }
                        
                </div>
            </div>
            } @else {
                <div class="placeholder">
                    <mat-icon>person_add</mat-icon>
                    <span>{{ nullLabel() }}</span>
                </div>
            }

        <div class="actions">
            
            @if (enableAssignMe() && !selectedItem() && !isDisabled()) {
                <button (click)="assignToMe($event)">
                    Assign Me
                </button>
            }

            @if (!selectedItem()) {
                <button [disabled]="isDisabled()">
                    <mat-icon>add</mat-icon>
                </button>
            }
            
            @if (selectedItem() && !isDisabled()) {
                <button class="flat" (click)="clearSelection($event)">
                    <mat-icon>close</mat-icon>
                </button>
            }
        </div>
    </div>
</div>